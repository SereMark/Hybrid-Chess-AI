# Tuned for Ryzen 7 5800H (8C/16T), Laptop RTX 3070 8GB, 16GB RAM.

MODEL:
  blocks: 5
  channels: 88

TORCH:
  threads_intra: 12
  threads_inter: 2
  amp_enabled: true
  model_channels_last: true
  eval_model_channels_last: true
  matmul_float32_precision: high
  cuda_matmul_fp32_precision: tf32
  cudnn_conv_fp32_precision: tf32
  cuda_allow_fp16_reduced_reduction: true
  cudnn_benchmark: true
  deterministic: false

EVAL:
  batch_size_max: 160
  coalesce_ms: 3
  cache_capacity: 8000
  value_cache_capacity: 12000
  encode_cache_capacity: 4000
  use_fp16_cache: true

SELFPLAY:
  num_workers: 4
  game_max_plies: 120
  temperature_moves: 32
  temperature_high: 1.4
  temperature_low: 0.55
  deterministic_temp_eps: 0.01
  opening_random_moves: 2
  curriculum:
    sample_probability: 0.2
  adjudication_enabled: true
  adjudication_warmup_iters: 24
  adjudication_ramp_iters: 48
  adjudication_min_plies: 120
  adjudication_min_plies_init: 150
  adjudication_value_margin: 0.35
  adjudication_value_margin_init: 0.55
  adjudication_persist_plies: 14
  adjudication_persist_init: 18
  adjudication_material_margin: 8.0
  adjudication_material_margin_init: 12.0
  simulation_scale_min: 0.4
  simulation_scale_max: 1.0
  simulation_scale_buffer_target: 0.55

REPLAY:
  capacity: 24000

SAMPLING:
  recent_ratio: 0.6
  recent_ratio_min: 0.5
  recent_ratio_max: 0.7
  recent_window_frac: 0.3

RESIGN:
  enabled: false
  min_plies: 36
  playthrough_fraction: 0.25

MCTS:
  train_simulations: 112
  train_simulations_min: 64
  train_sim_decay_move_interval: 28
  c_puct: 1.15
  c_puct_base: 19652
  c_puct_init: 1.5
  fpu_reduction: 0.12
  dirichlet_alpha: 0.25
  dirichlet_weight: 0.25
  visit_count_clamp: 65535

TRAIN:
  total_iterations: 120
  games_per_iter: 96
  batch_size: 112
  batch_size_min: 96
  batch_size_max: 128
  samples_per_new_game: 0.6
  update_steps_min: 24
  update_steps_max: 64
  learning_rate_init: 0.00065
  learning_rate_final: 0.0003
  learning_rate_warmup_steps: 1200
  lr_steps_per_iter_estimate: 48
  lr_restart_interval_iters: 0
  lr_restart_decay: 1.0
  weight_decay: 0.00012
  momentum: 0.9
  grad_clip_norm: 1.0
  ema_enabled: true
  ema_decay: 0.999

ARENA:
  eval_every_iters: 12
  games_per_eval: 40
  mcts_simulations: 144
  temperature: 0.45
  temperature_moves: 12
  gate_baseline_p: 0.50
  gate_margin: 0.008
  gate_min_games: 32
  gate_min_decisive: 4
  gate_draw_weight: 0.4
  resign_enable: false
  max_game_plies: 160

LOG:
  checkpoint_interval_iters: 24
  empty_cache_interval_iters: 96
  metrics_csv_enable: true
